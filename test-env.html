<!DOCTYPE html>
<html>
<head>
    <title>Test Supabase Environment</title>
</head>
<body>
    <h1>Teste de Configuração do Supabase</h1>
    <div id="results"></div>
    
    <script type="module">
        const results = document.getElementById('results');
        
        function log(message, isError = false) {
            const div = document.createElement('div');
            div.style.color = isError ? 'red' : 'green';
            div.style.marginBottom = '10px';
            div.textContent = message;
            results.appendChild(div);
        }
        
        // Verificar variáveis de ambiente
        log('=== VERIFICAÇÃO DE VARIÁVEIS DE AMBIENTE ===');
        
        const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
        const supabaseKey = import.meta.env.VITE_SUPABASE_ANON_KEY;
        
        if (supabaseUrl) {
            log(`✓ VITE_SUPABASE_URL: ${supabaseUrl}`);
        } else {
            log('✗ VITE_SUPABASE_URL não definida', true);
        }
        
        if (supabaseKey) {
            log('✓ VITE_SUPABASE_ANON_KEY: DEFINIDA');
        } else {
            log('✗ VITE_SUPABASE_ANON_KEY não definida', true);
        }
        
        // Testar importação do Supabase
        log('\n=== TESTE DE CONEXÃO ===');
        
        try {
            const { supabase } = await import('./src/services/supabase.js');
            log('✓ Cliente Supabase importado com sucesso');
            
            // Testar uma consulta simples
            const { data, error } = await supabase
                .from('ordens_servico')
                .select('id')
                .limit(1);
            
            if (error) {
                log(`✗ Erro na consulta: ${error.message}`, true);
                log(`Código: ${error.code}`, true);
                if (error.details) {
                    log(`Detalhes: ${error.details}`, true);
                }
            } else {
                log('✓ Consulta executada com sucesso!');
                log(`Dados retornados: ${JSON.stringify(data)}`);
            }
            
        } catch (error) {
            log(`✗ Erro ao importar/testar Supabase: ${error.message}`, true);
        }
    </script>
</body>
</html>
